pytsdl
======

**pytsdl** is a TSDL (Trace Stream Description Language) parser
implemented entirely in Python 3. TSDL is the language at the heart of
[CTF](http://git.efficios.com/?p=ctf.git;a=blob_plain;f=common-trace-format-specification.txt;hb=master),
the Common Trace Format.

Although there are some limitations (see below), pytsdl successfully
parse a TSDL metadata file generated by [LTTng](http://lttng.org/).


installing
----------

You need [pyPEG2](http://fdik.org/pyPEG/). Unfortunately, pyPEG2 is
not provided by package managers, so it needs to be installed manually.
This is quite easy using its `setup.py` install script. Arch Linux
users, however, will be happy to find it in the AUR under the name
`python-pypeg2`.

Then install pytsdl:

    git clone https://github.com/eepp/pytsdl.git
    cd pytsdl
    sudo ./setup.py install


using
-----

Have a look at [`test.py`](test.py).


features
--------

Current features:

  * parses a TSDL file and produces a rich AST
  * constant numbers and literal strings are converted to native
    Python numbers and strings
  * types are resolved with appropriate scoping (`struct` and `variant`
    references, `enum`s integer types, as well as `typealias`es)
  * nodes have `list` and `dict` interfaces when appropriate


limitations
-----------

Current limitations:

  * super slow when parsing big files (probably a pyPEG2 issue)
  * `typedef` is not supported (`typealias` is)
  * pointer syntax is not supported (`struct hello*`, `name->something`,
    etc.)
  * `variant` tags are not resolved to the appropriate nodes (only their
    expressions are available currently)
